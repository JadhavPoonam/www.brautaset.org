---
title: How I Blog (This Week)
layout: post
abstract: I share my Emacs & Org-mode setup for blogging with Jekyll.
tags: Emacs
---

<p>
I've long used <a href="http://jekyllrb.com">Jekyll</a> to assemble my blog, and Emacs two write all my content
and templates. I've been wanting to use <a href="https://github.com/eggcaker/jekyll-org/issues/19">jekyll-org</a> to write my blog entries
directly in Org format, but that is unfortunately not possible yet, in the
way I want it to work. However, I have found a work-around I am happy with
for now.
</p>

<p>
Recently I've started exploring Org-mode's Capture templates, and I've now
set up a new template for capturing the outline of a blog post. The template
is called <code>tpl-blog-post.org</code> and lives in my ~/Org folder. It looks like
this:
</p>

<div class="org-src-container">

<pre class="src src-org">* NEXT %^{Title}
  :PROPERTIES:
  :EXPORT_FILE_NAME: ~/play/superloopy.io/_posts/%&lt;%Y-%m-%d&gt;-draft-blog-post
  :END:
#+OPTIONS: toc:nil
#+BEGIN_HTML
---
title: %\1
layout: post
abstract: %^{Abstract}
tags: %^{Tags (comma separated)}
---
#+END_HTML

%\2

%?
</pre>
</div>

<p>
In my Emacs config I add an entry like this:
</p>

{% highlight emacs-lisp %}
(add-to-list 'org-capture-templates
             '("b" "Blog Post" entry (file+headline "Agenda.org" "Blog")
               (file "tpl-blog-post.org") :empty-lines-before 1))
{% endhighlight %}

<p>
This means I can hit <code>C-c c b</code> and a buffer opens up prompting me for <i>Title</i>,
<i>Abstract</i> and <i>Tags</i>, and have these inserted into a new entry. I can then
type a rough draft of my post. Hitting <code>C-c C-c</code> saves the draft to my
Agenda.org file under the <i>Blog</i> heading.
</p>

<p>
When I've had a chance to review the nascent blog post I can export it to
HTML, from the Org Export Dispatcher: <code>C-c C-e</code>. I have to remember to select
<i>Body only</i> by hitting <code>C-b</code> and usually <i>Export scope: Subtree</i> by hitting
<code>C-s</code>, before I export to HTML with <code>h h</code>. Because of the <code>EXPORT_FILE_NAME</code>
property, Org puts the exported file directly into my Jekyll _posts directory,
where it will be picked up.
</p>

<p>
Because I end up checking in HTML source, rather than Org source it is not
entirely ideal if I then need to go back editing blog posts. But in my
experience I don't do that a lot. And if I <i>do</i> then I should be able to find
my old source in my <code>~/Org/Archive.org</code> file, where most deleted from
<code>~/Org/Agenda.org</code> ends up. This directory is in iCloud Drive.</p>
